package:
  name: py3-rss-server
  version: 1.0.13
  epoch: 0
  description: Modular RSS Server application
  target-architecture:
    - x86_64
    - aarch64
  copyright:
    - license: MIT
  dependencies:
    runtime:
      - python3
      - py3-apscheduler
      - py3-beautifulsoup4
      - py3-blinker
      - py3-certifi
      - py3-charset-normalizer
      - py3-click
      - py3-feedgen
      - py3-feedgenerator
      - py3-flask
      - py3-gunicorn
      - py3-idna
      - py3-iniconfig
      - py3-itsdangerous
      - py3-jinja2
      - py3-lxml
      - py3-markupsafe
      - py3-packaging
      - py3-pluggy
      - py3-prometheus-client
      - py3-prometheus-flask-exporter
      - py3-python-dateutil
      - py3-pytz
      - py3-pyyaml
      - py3-requests
      - py3-six
      - py3-soupsieve
      - py3-tzlocal
      - py3-typing-extensions
      - py3-urllib3
      - py3-werkzeug

environment:
  contents:
    repositories:
      - https://packages.wolfi.dev/bootstrap/stage3
      - https://packages.wolfi.dev/os
    keyring:
      - https://packages.wolfi.dev/bootstrap/stage3/wolfi-signing.rsa.pub
      - https://packages.wolfi.dev/os/wolfi-signing.rsa.pub
    packages:
      - busybox
      - python3
      - py3-pip
      - py3-setuptools
      - py3-wheel
      - build-base

pipeline:
  - uses: git-checkout
    with:
      repository: https://github.com/wkonitzer/rss-server
      tag: v${{package.version}}
      expected-commit: 43812ce553ee1bdf02e0f8e3016a4a0570fba33e

  - uses: py/pip-build-install
    with:
      python: python3

test:
  pipeline:
    - uses: python/import
      with:
        python: python3
        imports: |
          import app
          import get_latest_release
          import config
          import fetch_functions
          import product_utils

update:
  enabled: true
  github:
    identifier: wkonitzer/rss-server
    strip-prefix: v
